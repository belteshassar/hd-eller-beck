<div id="rules">
    Sedan några år tillbaka namnger Högsta domstolen de flesta av de mål som den avgör.
    Namnen för ibland tankarna till kriminalromaner eller -filmer. Klarar du att skilja på de två?
    Du kommer att få se tio titlar och din uppgift är att avgöra om titeln tillhör en Beck-film eller
    ett rättsfall från Högsta domstolen. <!--eller kanske båda, men det finns inget sådant exempel när detta skrivs-->
    <button id="start">Starta</button>
</div>
<button id="replay">Försök igen</button>
<div id="quiz"></div>
<button id="hd">Rättsfall</button>
<button id="beck">Beck-film</button>
<div id="results"></div>

<script>

const quizContainer = document.getElementById('quiz');
const resultsContainer = document.getElementById('results');
const rulesContainer = document.getElementById('rules');
const startButton = document.getElementById('start');
const hdButton = document.getElementById('hd');
const beckButton = document.getElementById('beck');
const replayButton = document.getElementById('replay');

// hide elements for later use
hdButton.style.display = "none";
beckButton.style.display = "none";
replayButton.style.display = "none";

const myQuestions = [
  {
    question: "Kartellen",
    answers: {
      a: "Rättsfall",
      b: "Beck-film"
    },
    correctAnswer: "b"
  },
  {
    question: "Ishavet",
    answers: {
        a: "Rättsfall",
        b: "Beck-film"
    },
    correctAnswer: "a"
  },
  {
    question: "Royal",
    answers: {
        a: "Rättsfall",
        b: "Beck-film"
    },
    correctAnswer: "a"
  }
];

var score = 0;

async function runQuiz(){
    // for each question...
    myQuestions.forEach(
    (currentQuestion, questionNumber) => {
        //displayQuestion(currentQuestion);
        //display alternatives
        //await answer
        //display results
        //await next
    }
    )
}

function showResults(){
    replayButton.style.display = "block";
}

function hideResults(){
    replayButton.style.display = "none";
}

let waitForPressResolve;

function waitForPress() {
    return new Promise(resolve => waitForPressResolve = resolve);
}

function btnResolver() {
  if (waitForPressResolve) waitForPressResolve();
}

async function mainLoop(){
    while (true){
        startButton.addEventListener('click', btnResolver);
        // await start button press
        await waitForPress();
        //disable and remove start button
        startButton.removeEventListener('click', btnResolver);
        // hide rules
        rulesContainer.style.display = "none";
        runQuiz();
        showResults();
        replayButton.addEventListener('click', btnResolver);
        await waitForPress();
        replayButton.removeEventListener('click', btnResolver);
        hideResults();
        // show rules
        rulesContainer.style.display = "block";
    }
}

// Fetch and process data from Wikidata.
// To be created, for now use the const above.

// Run main loop of the game
mainLoop();

// on submit, show results
submitButton.addEventListener('click', showResults);

</script>
